/*
 * heapsort.c
 *
 *  Created on: 2015年8月5日
 *      Author: Song Zhi-Cheng
 */


#include "General.h"


void adjustHeap(int arr[],int start,int end){
	int tmp = arr[start];
	int i;
	//每次调整3个，如果传入进来的节点start,i,i+1，已经是一个有序的序列，那么循环执行一次就会结束。
	for(i=2*start+1;i<end;i*=2){
		if(arr[i] < arr[i+1]) i++;//选择大的子节点
		if(arr[i] < tmp) break;//选择子节点和父节点中较大的一个
		int temp = arr[i];
		arr[i] = arr[start];
		arr[start] = temp;
		start = i;
	}
}


void heapSort(int arr[], int n){

	int i ;
	//建立一个初始堆，这个堆是一个原始的序列
	//此循环从n/2开始，是要从中间部分向上逐渐调整。
	for(i=n/2;i>=0;i--){
		adjustHeap(arr,i,n-1);
	}
}

